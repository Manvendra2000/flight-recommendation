"use strict";(globalThis.webpackChunkfrontend_home=globalThis.webpackChunkfrontend_home||[]).push([["238"],{12220:function(e,a,t){t.d(a,{Z:function(){return h}});var l=t(63127),o=t(67294),n=t(39719),i=t(89250),s=t(46127),d=t(28147),r=t(21406),u=t(98544),c=t(18209),m=t(54056),Z=t(34500),f=t(3397);let h=e=>{let{className:a}=e,t=(0,n.v9)(r.Zv),h=(0,m.SK)(),b=(0,n.I0)(),v=(0,i.useLocation)(),g=(0,i.useNavigate)(),p=(0,n.v9)(Z.t),C=(0,n.v9)(c.lV),k=(0,o.useCallback)(()=>{if(h(d.sp),document.referrer.includes("dealsProvider")){window.location.href=document.referrer;return}if("default"===v.key||!C){g(p,{replace:!0}),(0,f.k3)();return}C&&(g(C,{replace:!0}),b((0,u.ak)()),(0,f.k3)())},[C,p]);return t?(0,l.Z)("div",{className:a},void 0,(0,l.Z)(s.Z,{onClick:k})):null}},88249:function(e,a,t){t.d(a,{Z:()=>z});var l,o,n,i,s=t("63127"),d=t("5406"),r=t("51949"),u=t("37134"),c=t("67294"),m=t("86896"),Z=t("44012"),f=t("39719"),h=t("52730"),b=t("78776"),v=t("99510"),g=t("10499"),p=t("3279"),C=t("45823"),k=t("79021"),S=t("46813"),y=t("60400"),x=t("44198"),F=t("16606"),_=t("72724"),w=t("10433"),N=t("24031"),D=t("33824"),M=t("4845"),T=t("54056"),B=t("3397");let A=(0,c.memo)(e=>{let{modeKey:a,onSearchClick:t,searchForm:n,hideModal:i}=e,r=(0,T.SK)(),u=(0,f.I0)(),{isSmallOrMediumMobile:m}=(0,p.Z)(),h=(0,f.v9)(N.D6),A=(0,f.v9)((0,x.W$)(a)),I=(0,f.v9)(e=>(0,k.p)(e,{})),E=(0,f.v9)(e=>(0,_.Z)(e,{})),{setIsScarcityEligibilityReported:O}=(0,c.useContext)(v.m),P=(0,C.Z)(),R=n||h,j=g.fS(R,A),W=g.KF(R),{pathname:K,query:V}=E({searchForm:R}),H=(0,c.useCallback)(e=>{if(1!==e.button&&!e.ctrlKey&&!e.metaKey){if(e.preventDefault(),j&&i){i();return}t(),u((0,F.Q1)()),u((0,y.Fv)(a)(R)),(0,B.k3)(),P(),r(b.WA,(0,w.b)(R,I),null,{searchForm:R}),O(!1),D.Z.track("search","clickSearchButton",(0,M._)(R))}},[j,i,t,u,a,R,P,r,I,O]);return(0,s.Z)(d.default,{type:"primary",onClick:H,href:W?"":(0,S.vE)(K,V),disabled:W,dataTest:"SearchButton",fullWidth:m},void 0,l||(l=(0,s.Z)(Z.Z,{id:"search.form.button.search"})),!j&&(o||(o=(0,s.Z)("div",{className:"absolute animate-pulse-scale rounded-150 bg-button-primary-background safe-inset-0"}))))});var I=t("16690"),E=t("29495"),O=t("33995"),P=t("70613"),R=t("9826"),j=t("13496"),W=t("58796"),K=t("38719"),V=t("25118"),H=t("59860"),L=t("28644");let z=e=>{let{hideModal:a,searchForm:t,filtersState:l,initialSearchFormOrigin:o,initialSearchFormDestination:b}=e,v=(0,f.I0)(),{formatMessage:p}=(0,m.Z)(),[C,k]=(0,c.useState)(t),[S,y]=(0,c.useState)(l),[x,F]=(0,c.useState)(null),_=(0,K.a0)(),w=(0,I.Z)(),N=(0,K.j8)(),{hideModal:D}=(0,P.h)("modifyItinerary"),M=(0,f.v9)(W.F3),T=(0,c.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;k(e),a&&y(a)},[k]),B=(0,c.useCallback)(e=>{x?F(null):F(e)},[x,F]),{setPassengers:z,setBags:J,setCabinClass:Q,setPassengersAndBags:U,setPassengersAndBagsAndCabinClass:G}=(0,V.Z)(C,k),$=(0,c.useCallback)(e=>{if(e!==g.iJ(C)){if(e===g.xd.nomad)N("nomad");else{let a=g.PM(e,C,null);if(e===g.xd.multicity){v((0,j.I)((0,H.j4)())),_(a),D();return}v((0,O.V)(0)),k(a)}}},[C,v,_]),X=(0,c.useCallback)(()=>{a(),M&&window.history.back()},[M,a]),Y=(0,c.useCallback)(()=>{let e=!(0,E.fS)(C.origin,o),t=!(0,E.fS)(C.destination,b),l=w&&(e||t),n=S.resetFilter("lockedSectors");_(C,l?n.clear():n,{shouldPublishFormChanges:!0}),a()},[C,o,b,w,_,S,a]),q=!!x,ee=g.KF(t),ea=(0,R.Q)();return(0,s.Z)(u.default,{renderInto:"modals"},void 0,(0,s.Z)("div",{className:q?"hidden lm:block":void 0},void 0,(0,s.Z)(r.default,{onClose:ee?void 0:X,size:"normal",lockScrolling:!ea,disableAnimation:!0,labelClose:p({id:"orbit.button_close"})},void 0,n||(n=(0,s.Z)(r.ModalHeader,{title:(0,s.Z)(Z.Z,{id:"nomad_results.modify_journey"})})),(0,s.Z)(r.ModalSection,{},void 0,(0,s.Z)(h.Z,{activeMode:g.iJ(C),onChangeMode:$,onChangePassengers:z,onChangeCabinClass:Q,onChangeBags:J,onChangePassengersAndBags:U,onChangePassengersAndBagsAndCabinClass:G,passengers:C.passengers,cabinClass:C.cabinClass,bags:C.bags,mobileModifyModal:!0,togglePopover:B,openedPopover:x}),(0,s.Z)(L.Z,{searchForm:C,filtersState:S,setSearchFormAndFiltersState:T,initialSearchFormOrigin:o,initialSearchFormDestination:b,isModifyModal:!0})),(0,s.Z)(r.ModalFooter,{},void 0,(0,s.Z)("div",{className:"flex w-full justify-between gap-300"},void 0,(0,s.Z)(d.default,{onClick:X,type:"secondary",disabled:ee},void 0,i||(i=(0,s.Z)(Z.Z,{id:"search.form.button.cancel"}))),(0,s.Z)(A,{modeKey:"simple",onSearchClick:Y,searchForm:C,hideModal:X}))))))}},41858:function(e,a,t){t.d(a,{Z:()=>ek});var l,o,n,i,s,d,r,u,c,m,Z,f,h,b,v,g,p=t("63127"),C=t("71654"),k=t("1410"),S=t("96695"),y=t("67294"),x=t("39719"),F=t("89250"),_=t("46127"),w=t("28147"),N=t("98544"),D=t("18209"),M=t("54056"),T=t("34500"),B=t("3397");let A=()=>{let e=(0,M.SK)(),a=(0,x.I0)(),t=(0,F.useLocation)(),l=(0,F.useNavigate)(),o=(0,x.v9)(T.t),n=(0,x.v9)(D.lV),i=(0,y.useCallback)(()=>{if(e(w.sp),"default"===t.key||null==n){l(o,{replace:!0}),(0,B.k3)();return}l(n,{replace:!0}),a((0,N.ak)()),(0,B.k3)()},[n,o]);return(0,p.Z)(_.Z,{onClick:i})};var I=t("19342"),E=t("35142"),O=t("86896"),P=t("87775"),R=t("948"),j=t("35399"),W=t("70613"),K=t("24031"),V=t("80052");let H=(0,V.Z)(e=>{let{filtersState:a}=e,{formatMessage:t}=(0,O.Z)(),{showModal:o}=(0,W.h)(R.Q8),n=(0,M.SK)(),i=(0,x.v9)(K.$T),s=(0,j.Hg)(a,i),d=(0,y.useCallback)(()=>{o(),window.history.pushState({},"","#filters"),n(P.zj,{type:"allFilters",groupType:"allFilters",activeFiltersCount:s})},[s,o]);return(0,p.Z)("div",{className:"relative"},void 0,(0,p.Z)(I.default,{type:"secondary",iconLeft:l||(l=(0,p.Z)(E.default,{})),title:t({id:"result.filter.dialog.filters"}),onClick:d,dataTest:"MobileHeaderFiltersButton"}),s>0&&(0,p.Z)("div",{"data-test":"ActiveFilters",className:"pointer-events-none absolute right-[3px] top-[7px] flex h-[18px] w-[18px] items-center justify-center rounded-full border-2 border-solid border-white bg-blue-normal pb-[1px] text-[12px] font-medium leading-none text-white-normal"},void 0,s))});var L=t("30552"),z=t("85199"),J=t("49074"),Q=t("78776"),U=t("16690"),G=t("2119"),$=t("51770"),X=t("7375"),Y=t("38895"),q=t("10499"),ee=t("20518"),ea=t("49028"),et=t("3279"),el=t("78291"),eo=t("60400"),en=t("95923"),ei=t("75183"),es=t("38719"),ed=t("88249"),er=t("23907"),eu=t("45109"),ec=t("44012"),em=t("85893");let eZ=e=>!(0,Y.l2)(e)&&(0,Y.Ws)(e)&&(0,Y.Ls)(e)?(0,eu.WU)(e.from,"d MMM"):null,ef=e=>{let{searchForm:a}=e,t=(0,q.iJ)(a);if("multicity"===t||"nomad"===t)return o||(o=(0,p.Z)(ec.Z,{id:"search.form.mobile_header.multiple_dates"}));let l=eZ(a.outboundDate);if("oneWay"===t){if((0,Y.Ws)(a.outboundDate)&&(0,Y.uz)(a.outboundDate))return(0,em.jsxs)(em.Fragment,{children:[(0,eu.WU)(a.outboundDate.from,"d MMM"),(0,Y.k1)(a.outboundDate)&&(0,p.Z)("span",{className:"text-ink-light"},void 0,n||(n=(0,p.Z)(er.default,{size:"small"})),a.outboundDate.flexibleDate)]});if(null!=l)return l}let d=eZ(a.inboundDate);return null!=l&&null!=d?(0,em.jsxs)(em.Fragment,{children:[(0,p.Z)("span",{},void 0,l),i||(i=(0,p.Z)("span",{className:"font-normal text-secondary-foreground"},void 0,(0,p.Z)(ec.Z,{id:"map.to"}))),(0,p.Z)("span",{},void 0,d)]}):s||(s=(0,p.Z)(ec.Z,{id:"search.form.mobile_header.flexible_dates"}))};var eh=t("77048"),eb=t("15619"),ev=t("72208");let eg=e=>{let{searchForm:a}=e,t=(0,q.iJ)(a),{getPlaceRowText:l}=(0,ev.Od)();return(0,p.Z)("div",{className:"flex items-center font-bold leading-normal safe-space-x-100"},void 0,"multicity"===t&&(d||(d=(0,p.Z)(ec.Z,{id:"search.form.mode.multicity"}))),"nomad"===t&&(r||(r=(0,p.Z)(ec.Z,{id:"form_search.salesman_title"}))),("oneWay"===t||"return"===t)&&(0,em.jsxs)(em.Fragment,{children:[(0,p.Z)("div",{className:"max-w-[50%] truncate"},void 0,a.origin.places.length>1?(0,p.Z)(ec.Z,{id:"search.form.mobile_header.origins",values:{numOfOrigins:a.origin.places.length}}):(0,em.jsx)(em.Fragment,{children:l(a.origin)})),"oneWay"===t?u||(u=(0,p.Z)(eh.default,{size:"small",reverseOnRtl:!0})):c||(c=(0,p.Z)(eb.default,{size:"small"})),(0,p.Z)("div",{className:"max-w-[50%] truncate"},void 0,a.destination.places.length>1?(0,p.Z)(ec.Z,{id:"search.form.mobile_header.destinations",values:{numOfdestinations:a.destination.places.length}}):(0,em.jsx)(em.Fragment,{children:l(a.destination)}))]}))},ep=" \xb7 ",eC=e=>{let{searchForm:a,initialSearchFormOrigin:t,initialSearchFormDestination:l}=e,o=(0,x.I0)(),n=(0,M.SK)(),i=(0,q.iJ)(a),s=(0,x.v9)(el.rh),d=(0,es.a0)(),r=(0,x.v9)(ei.RI),{isModalVisible:u,showModal:c,hideModal:v}=(0,W.h)(R.EJ),{isModalVisible:g,showModal:C,hideModal:k}=(0,W.h)(R.Sx),S=(0,U.Z)(),[F,_]=(0,y.useState)(!1),{isMobileOrTablet:w}=(0,et.Z)(),N=(0,y.useCallback)(()=>{o((0,en.VG)(R.ae))},[o]),D=(0,y.useCallback)(()=>{if(w&&window.history.pushState({},"","#searchBar"),"multicity"===i){C(),n(Q.h_,null,null,{searchForm:a});return}if("nomad"===i){o((0,en.K4)(R.ae,{openIndex:-1})),n(Q.h_,null,null,{searchForm:a});return}c(),n(Q.h_,null,null,{searchForm:a})},[o,i,a,C,c,n,w]),T=(0,y.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;d(e,a),o((0,eo.Fv)((0,q._i)(e),e))},[o,d]),B=(0,y.useCallback)(e=>{let t=(0,$.No)(a.nomad,e.nomad);d(e,S&&t?s.clear():null),(0,eo.Fv)(e)},[s,S,a.nomad,d]),A=a.nomad.slice(2).reduce((e,a)=>{let{timeOfStay:t}=a;return{...e,min:e.min+t.min,max:e.max+t.max}},(0,Y.Vk)(0,0,!1));return(0,y.useEffect)(()=>{"multicity"===i&&!(0,q.d7)(a.multicity)&&(_(!0),!g&&C())},[g,i,a.multicity,C]),(0,y.useEffect)(()=>{g&&F&&_(!1)},[g,F]),(0,em.jsxs)(em.Fragment,{children:[(0,p.Z)("button",{type:"button",className:"flex min-w-0 grow items-center rounded-200 bg-cloud-light px-200 py-150 safe-space-x-200","data-test":"SearchBar",onClick:D},void 0,(0,p.Z)("div",{className:"min-w-0 grow"},void 0,(0,p.Z)(eg,{searchForm:a}),(0,p.Z)("div",{className:"flex items-center text-small leading-small"},void 0,(0,p.Z)("div",{"data-test":"SearchBarDates",className:"flex items-center font-medium safe-space-x-100"},void 0,(0,p.Z)(ef,{searchForm:a})),m||(m=(0,p.Z)("span",{className:"pe-50 ps-100 text-secondary-foreground"},void 0,ep)),Z||(Z=(0,p.Z)(J.default,{size:"small"})),(0,X.n0)(a.passengers),f||(f=(0,p.Z)("span",{className:"pe-50 ps-100 text-secondary-foreground"},void 0,ep)),h||(h=(0,p.Z)(L.default,{size:"small"})),(0,G.NU)({},a.bags))),b||(b=(0,p.Z)(z.default,{size:"large"}))),u&&(0,p.Z)(ed.Z,{hideModal:v,searchForm:a,filtersState:s,initialSearchFormOrigin:t,initialSearchFormDestination:l}),g&&(0,p.Z)(ee.Z,{searchForm:a,setSearchFormAndFilters:T,onClose:k,openFromModeChange:F}),!1!==r&&(0,p.Z)(ea.Z,{searchForm:a,filtersState:s,setSearchForm:B,onClose:N,defaultOpenIndex:r.openIndex,tripTimeOfStay:A})]})},ek=e=>{let{searchForm:a,initialSearchFormOrigin:t,initialSearchFormDestination:l}=e,o=(0,S.mW)(a),n="C"===(0,C.useTest)("MOBILE_SEARCH_HEADER_EXPOSED")||o;return(0,p.Z)("div",{className:(0,k.Z)("flex items-center bg-white-normal px-100 py-200 shadow-fixed safe-space-x-100",n&&"pe-300")},void 0,v||(v=(0,p.Z)(A,{})),(0,p.Z)(eC,{searchForm:a,initialSearchFormOrigin:t,initialSearchFormDestination:l}),!n&&(g||(g=(0,p.Z)(H,{}))))}},20518:function(e,a,t){t.d(a,{Z:()=>L});var l,o,n,i,s,d=t("63127"),r=t("51035"),u=t("51949"),c=t("37134"),m=t("67294"),Z=t("86896"),f=t("44012"),h=t("39719"),b=t("12220"),v=t("52730"),g=t("96722"),p=t("83497"),C=t("58926"),k=t("78776"),S=t("948"),y=t("16690"),x=t("10499"),F=t("3279"),_=t("45823"),w=t("79021"),N=t("60400"),D=t("70613"),M=t("21406"),T=t("18209"),B=t("32895"),A=t("9826"),I=t("16606"),E=t("72854"),O=t("25118"),P=t("33824"),R=t("4845"),j=t("54056"),W=t("46176"),K=t("3397"),V=t("5406");let H=e=>{let{isSubmitDisabled:a,handleBack:t,handleConfirm:n,backButtonDataTest:i="SearchFormResultsCancelButton",submitButtonDataTest:s="DoneButton"}=e,{isSmallOrMediumMobile:r}=(0,F.Z)();return(0,d.Z)("div",{className:"flex w-full justify-between gap-300"},void 0,(0,d.Z)(V.default,{type:"secondary",onClick:t,dataTest:i},void 0,l||(l=(0,d.Z)(f.Z,{id:"search.form.button.cancel"}))),(0,d.Z)("div",{className:"flex grow justify-end tb:ms-300"},void 0,(0,d.Z)(V.default,{dataTest:s,disabled:a,fullWidth:r,onClick:n,type:"primary"},void 0,o||(o=(0,d.Z)(f.Z,{id:"search.form.button.search"})))))},L=e=>{let{searchForm:a,setSearchFormAndFilters:t,onClose:l,openFromModeChange:o}=e,V=(0,h.I0)(),L=(0,j.SK)(),{formatMessage:z}=(0,Z.Z)(),{isSmallOrMediumMobile:J,isMobile:Q}=(0,F.Z)(),U=(0,h.v9)(e=>e.searchFormUI.placeLimitWarningShown),G=(0,h.v9)(e=>e.urlBeforeMulticity),{firstPollRequestId:$,requestId:X}=(0,h.v9)(T.V6),Y=(0,h.v9)(M.BX),[q,ee]=(0,m.useState)(a),[ea,et]=(0,m.useState)(!0),el=(0,h.v9)(w.Q),eo=(0,y.Z)(),en=(0,_.Z)(),ei=(0,m.useCallback)(e=>{let a="function"==typeof e?e(q):e;U&&V((0,B.QE)()),(0,x.NB)(a).find(e=>(0,W.Z)(e))?V((0,B.cT)()):(ee(a),(0,j.XJ)(q,a,$,X))},[q,U,V,$,X]),es=(0,m.useCallback)(()=>{if(U&&V((0,B.QE)()),o){let e=G&&!G.includes("/multicity");window.location.href=e?G:`/${Y}/`}else L(k.HY,{mode:"multicity"}),l()},[U,o,V,G,Y,L,l]),ed=(0,m.useCallback)(()=>{if((0,x.fS)(a,q)){l();return}if((0,x.KF)(q)||(0,x.Ms)(q)){et(!1);return}U&&V((0,B.QE)());let e=(0,E.T)(a.multicity,q.multicity),o=eo&&e;V((0,I.Q1)()),t(q,o?el:null),(0,K.k3)(),setTimeout(()=>{l()},0),L(k.WA,null,null,{searchForm:q}),en(),P.Z.track("search","modifyButtonClick",(0,R._)(q))},[a,q,U,eo,V,t,el,L,en,l]),er=(0,A.Q)(),eu=(0,m.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t(e,a),V((0,N.Fv)((0,x._i)(e),e))},[V,t]),[ec,em]=(0,m.useState)(null),eZ=!!ec,{hideModal:ef}=(0,D.h)(S.Sx),eh=(0,g.Z)(),eb=(0,m.useCallback)(e=>{ec?em(null):em(e)},[ec,em]),{setPassengers:ev,setBags:eg,setCabinClass:ep,setPassengersAndBags:eC,setPassengersAndBagsAndCabinClass:ek}=(0,O.Z)(q,ee),{setMode:eS}=(0,O.Z)(a,eu),ey=(0,m.useCallback)(e=>{eS(e),ef()},[ef,eS]);return(0,d.Z)(c.default,{renderInto:"modals"},void 0,(0,d.Z)("div",{className:eZ?"hidden lm:block":void 0},void 0,(0,d.Z)(u.default,{dataTest:"ModifyModal",onClose:Q?void 0:es,size:"large",disableAnimation:!0,fixedFooter:J,lockScrolling:!er,labelClose:z({id:"orbit.button_close"})},void 0,(0,d.Z)(u.ModalHeader,{},void 0,(0,d.Z)(r.default,{type:Q?"title3":"title2",spaceAfter:Q?"normal":"none"},void 0,n||(n=(0,d.Z)(f.Z,{id:"nomad_results.modify_journey"}))),eh&&(0,d.Z)(v.Z,{activeMode:x.xd.multicity,backButton:i||(i=(0,d.Z)(b.Z,{className:"-my-200 -ms-300"})),bags:q.bags,cabinClass:q.cabinClass,onChangeBags:eg,onChangeCabinClass:ep,onChangeMode:ey,onChangePassengers:ev,onChangePassengersAndBags:eC,onChangePassengersAndBagsAndCabinClass:ek,passengers:q.passengers,mobileModifyModal:!0,togglePopover:eb,openedPopover:ec}),(0,d.Z)(m.Suspense,{},void 0,(0,d.Z)(p.Z,{searchForm:q,setSearchFormAndFiltersState:ei,setExpanded:e=>V((0,B.YT)(e)),suppressErrors:ea})),U&&(0,d.Z)(m.Suspense,{},void 0,(0,d.Z)("div",{className:"relative h-[120px] [&_>_.search-warning]:relative [&_>_.search-warning]:-inset-x-400 [&_>_.search-warning]:top-400 [&_>_.search-warning]:z-default [&_>_.search-warning]:w-[calc(theme(spacing.800)+100%)]"},void 0,(0,d.Z)(C.Z,{onClose:()=>V((0,B.QE)())},void 0,s||(s=(0,d.Z)(f.Z,{id:"search.place_limit_warning"}))))),(0,d.Z)("div",{className:"relative -top-[44px] float-right hidden tb:flex rtl:float-left","data-test":"MulticityDesktopButtons"},void 0,(0,d.Z)(H,{isSubmitDisabled:q.multicity.length<2,handleBack:es,handleConfirm:ed,backButtonDataTest:"SearchFormResultsCancelButtonDesktop",submitButtonDataTest:"DoneButton"}))),(0,d.Z)("div",{className:"tb:hidden"},void 0,(0,d.Z)(u.ModalFooter,{dataTest:"MulticityModalFooter"},void 0,(0,d.Z)(H,{isSubmitDisabled:q.multicity.length<2,handleBack:es,handleConfirm:ed,submitButtonDataTest:"DoneButton"}))))))}},49028:function(e,a,t){t.d(a,{Z:()=>eS});var l,o,n,i,s,d,r,u,c,m,Z,f,h,b=t("63127"),v=t("67964"),g=t.n(v),p=t("22624"),C=t.n(p),k=t("5406"),S=t("51035"),y=t("51949"),x=t("37134"),F=t("67294"),_=t("86896"),w=t("44012"),N=t("39719"),D=t("52730"),M=t("96722"),T=t("78776"),B=t("948"),A=t("10499"),I=t("3211"),E=t("92341"),O=t("68148"),P=t("22974"),R=t("71654"),j=t("49293"),W=t("12490"),K=t("9003"),V=t("84456"),H=t("93742"),L=t("55576"),z=t("23469"),J=t("89380"),Q=t("74788"),U=t("32895"),G=t("58796"),$=t("77044");let X=e=>{let{onClose:a,sector:t,setSector:o,searchForm:n,index:i}=e,s=(0,N.I0)(),d=(0,N.v9)(G.Hu),[r,u]=(0,F.useState)(t),c="on"===(0,R.useTest)("DATEPICKER_IMPROVE_USABILITY");(0,F.useEffect)(()=>{s((0,U.el)(z.G.OUTBOUND_DATE,i,void 0,n))},[]),(0,F.useEffect)(()=>{u(t)},[t]);let m=(0,F.useCallback)(()=>{o(i,r),s((0,U.el)(null)),a()},[o,a,r,i,s]),Z=(0,F.useCallback)(()=>{s((0,U.el)(null)),a()},[s,a]),f=(0,F.useCallback)(e=>{u({...r,dateRange:e})},[u,r]),{dateRange:h}=r;return d?(0,b.Z)(V.Z,{},void 0,(0,b.Z)(F.Suspense,{fallback:l||(l=(0,b.Z)(j.default,{}))},void 0,c?(0,b.Z)(L.Z,{searchForm:n,modeConfig:{departureRange:{formField:z.G.DATE_RANGE,allowAnytime:!1},returnRange:null,returnTTS:null},index:i,initialyTriggeredField:"outboundDate",onHide:Z,onNomadSetDateRange:f,onNomadDone:m}):(0,b.Z)(H.Z,{searchForm:n,modeConfig:{departureRange:{formField:z.G.DATE_RANGE,allowAnytime:!1},returnRange:null,returnTTS:null},index:i,initialyTriggeredField:"outboundDate",onHide:Z,onNomadSetDateRange:f,onNomadDone:m}))):(0,b.Z)(Q.Z,{className:"h-[450px] rounded-t-[0] border-t-0"},void 0,(0,b.Z)(K.Z,{activeField:0===i?"departureRange":"returnRange",value:h,oppositeValue:null,setFieldValue:f,scrollableView:!0,minDate:(0,W.I)(),shouldHavePrices:!1,selectingFrom:null,setSelectingFrom:$.Z,handleSetActiveField:$.Z,searchForm:n}),(0,b.Z)(J.Z,{showShadow:!0,onDoneClick:m}))},Y=e=>{let{index:a,sector:t,setSector:l,searchForm:o,defaultOpen:n,date:i,dateLabel:s}=e,{formatMessage:d}=(0,_.Z)(),r=1===a,[u,c]=(0,F.useState)(!1),m=(0,F.useCallback)(e=>{l(a,e)},[l,a]),Z=(0,F.useCallback)(()=>{c(!0)},[]),f=(0,F.useCallback)(()=>{c(!1)},[]);return(0,b.Z)(P.Z,{isPopupOpen:u,popup:(0,b.Z)(X,{onClose:f,sector:t,setSector:l,searchForm:o,index:a}),onClickOutside:f,dataTest:"NomadFormCardWrap"},void 0,u&&(0,b.Z)(I.Z,{title:d({id:"common.close"}),onClick:f}),(0,b.Z)(O.Z,{sector:t,setSector:m,index:a,rowOfDates:(0,b.Z)(E.Z,{onClick:Z,isDisabled:r,date:i,dateLabel:s,isDateUnderline:!r}),searchForm:o,defaultOpen:n,onOpen:f}),(0,b.Z)(E.Z,{isDisabled:r||u,onClick:Z,date:i,dateLabel:s,isDateUnderline:!r}))};var q=t("45823"),ee=t("22222"),ea=t("89990"),et=t("70613"),el=t("18209"),eo=t("9826"),en=t("16606"),ei=t("10433"),es=t("25118"),ed=t("33824"),er=t("4845"),eu=t("54056"),ec=t("3397"),em=t("19342"),eZ=t("72182"),ef=t("29495"),eh=t("51770"),eb=t("52157"),ev=t("48705"),eg=t("1410");let ep=e=>{switch(e){case 3:return o||(o=(0,b.Z)(w.Z,{id:"nomad_landing.add_another_one"}));case 4:return n||(n=(0,b.Z)(w.Z,{id:"nomad_landing.one_more"}));default:return i||(i=(0,b.Z)(w.Z,{id:"nomad_landing.add_place"}))}},eC=e=>{let{className:a,index:t,onClick:l}=e;return(0,b.Z)("button",{type:"button",className:(0,eg.Z)("flex h-full min-h-[82px] w-full cursor-pointer items-center justify-center rounded-100 border border-card border-dashed bg-white-normal p-400 text-large font-medium text-product-normal hover:bg-cloud-light",a),onClick:l},void 0,ep(t))},ek=(0,F.memo)(e=>{let{searchForm:a,setSearchForm:t,setSector:l,setIsTTSOpened:o,defaultOpenIndex:n,formatDate:i}=e,[u,c]=(0,F.useState)(!1),[m,Z]=(0,F.useState)(n),f=(0,F.useCallback)(()=>{t(A.$f(a)),c(!0)},[a,t]),h=(0,F.useCallback)(e=>{t(A.bS(e,a))},[a,t]),v=(0,F.useCallback)((e,a)=>{Z(null),l(e,a)},[l]),g=a.nomad.slice(2);return(0,b.Z)("div",{className:"mb-[50px] tb:mb-0","data-test":"NomadFormItem-Vias"},void 0,s||(s=(0,b.Z)("div",{className:"mb-600 mt-800 px-300 tb:mb-1000 tb:px-0"},void 0,(0,b.Z)(S.default,{spaceAfter:"small"},void 0,(0,b.Z)(w.Z,{id:"search.nomad.add_places.title.places_to_visit"})))),(0,b.Z)("div",{className:"mb-400 grid gap-400 tb:grid-cols-2"},void 0,g.map((e,t)=>ef.xb(e.destination)?(0,b.Z)(ev.Z,{index:t+2,setSector:v,searchForm:a,sector:e,justAdded:u,setJustAdded:c,removeSector:h,Button:eC},`${t}${g.length}`):(0,b.Z)(eb.Z,{removeDestination:h,sector:e,index:t+2,setSector:v,closable:g.length>2,searchForm:a,defaultOpen:m===t+2,setIsTTSOpened:o,formatDate:i},(0,eh.Jl)(e,t)))),(0,b.Z)("div",{"data-test":"NomadViasFooter"},void 0,g.length+2<eh.kn&&g.every(e=>!ef.xb(e.destination))&&(0,b.Z)(em.default,{type:"secondary",iconLeft:d||(d=(0,b.Z)(eZ.default,{color:"secondary"})),onClick:f},void 0,r||(r=(0,b.Z)(w.Z,{id:"nomad_landing.add_another_one"})))))}),eS=e=>{let{searchForm:a,setSearchForm:t,filtersState:l,onClose:o,defaultOpenIndex:n,tripTimeOfStay:i}=e,s=(0,en.Ib)(),d=(0,eu.SK)(),r=(0,N.v9)(G.Hu),{firstPollRequestId:v,requestId:p}=(0,N.v9)(el.V6),[I,E]=(0,F.useState)(a),[O,P]=(0,F.useState)(!1),{locale:R}=(0,F.useContext)(ea.ZP),{formatSearchDate:j}=(0,ee.Gb)(),{formatMessage:W}=(0,_.Z)(),K=(0,q.Z)(),V=(0,F.useCallback)(e=>j(e,R),[j,R]),H=(0,F.useCallback)((e,a)=>{E(e),(null==a?void 0:a.trackChange)===!0&&(0,eu.XJ)(I,e,v,p)},[I,E,v,p]),L=(0,F.useCallback)((e,a)=>{let t=C()({nomad:g()(e,a)},I);E(t),(0,eu.XJ)(I,t,v,p)},[I,E,v,p]),z=(0,F.useCallback)(()=>{!(0,A.fS)(a,I)&&(s(),t(I),(0,ec.k3)(),d(T.WA,(0,ei.b)(I,l),null,{searchForm:I}),K(),ed.Z.track("search","modifyButtonClick",(0,er._)(I))),o()},[a,I,o,s,t,d,l,K]),J=(0,F.useCallback)(()=>{o(),d(T.HY,{mode:"nomad"})},[o,d]),Q=(0,eo.Q)(),{nomad:U}=I,{setMode:$}=(0,es.Z)(a,t),{setPassengers:X,setBags:em,setCabinClass:eZ,setPassengersAndBags:ef,setPassengersAndBagsAndCabinClass:eh}=(0,es.Z)(I,E),[eb,ev]=(0,F.useState)(null),eg=!!eb,{hideModal:ep}=(0,et.h)(B.ae),eC=(0,M.Z)(),eS=(0,F.useCallback)(e=>{eb?ev(null):ev(e)},[eb,ev]),ey=(0,F.useCallback)(e=>{$(e),ep()},[$,ep]);return(0,b.Z)(x.default,{renderInto:"modals"},void 0,(0,b.Z)("div",{className:eg?"hidden lm:block":void 0},void 0,(0,b.Z)(y.default,{onClose:r?void 0:o,size:"extraLarge",disableAnimation:!0,fixedFooter:!O,lockScrolling:!Q,labelClose:W({id:"orbit.button_close"})},void 0,(0,b.Z)(y.ModalSection,{},void 0,eC&&(0,b.Z)("div",{className:"pb-200"},void 0,(0,b.Z)(S.default,{type:r?"title3":"title2",spaceAfter:r?"normal":"none"},void 0,u||(u=(0,b.Z)(w.Z,{id:"nomad_results.modify_journey"}))),(0,b.Z)(D.Z,{activeMode:A.xd.nomad,passengers:I.passengers,cabinClass:I.cabinClass,bags:I.bags,onChangeMode:ey,onChangePassengers:X,onChangeCabinClass:eZ,onChangePassengersAndBags:ef,onChangePassengersAndBagsAndCabinClass:eh,onChangeBags:em,hideCabinClass:!0,mobileModifyModal:!0,togglePopover:eS,openedPopover:eb})),c||(c=(0,b.Z)("div",{className:"mb-600 px-300 tb:mb-1000 tb:px-0"},void 0,(0,b.Z)(S.default,{type:"title3"},void 0,(0,b.Z)(w.Z,{id:"nomad_landing.start_finish"})))),(0,b.Z)("div",{className:"flex flex-col space-y-400 tb:flex-row tb:space-y-0 tb:safe-space-x-400","data-test":"NomadModalSection"},void 0,(0,b.Z)(Y,{index:0,sector:U[0],setSector:L,searchForm:I,defaultOpen:0===n,date:V(U[0].dateRange),dateLabel:m||(m=(0,b.Z)(w.Z,{id:"nomad.start_trip"}))}),(0,b.Z)(Y,{index:1,sector:U[1],setSector:L,searchForm:I,defaultOpen:1===n,date:V(i),dateLabel:Z||(Z=(0,b.Z)(w.Z,{id:"search.nomad.form.trip_lenght"}))})),(0,b.Z)(ek,{searchForm:I,setSearchForm:H,setSector:L,defaultOpenIndex:n,setIsTTSOpened:P,formatDate:V})),(0,b.Z)(y.ModalFooter,{dataTest:"ModalFooterNomad"},void 0,(0,b.Z)("div",{className:"flex w-full justify-between"},void 0,(0,b.Z)(k.default,{type:"white",onClick:J,dataTest:"BackToResultsButton"},void 0,f||(f=(0,b.Z)("span",{className:"whitespace-nowrap"},void 0,(0,b.Z)(w.Z,{id:"price_alert.web.back_to_results"})))),(0,b.Z)("div",{className:"w-full tb:w-auto"},void 0,(0,b.Z)(k.default,{dataTest:"SearchButtonNomadModal",fullWidth:!0,onClick:z,disabled:(0,A.KF)(I)},void 0,h||(h=(0,b.Z)(w.Z,{id:"search.form.button.search"})))))))))}},72854:function(e,a,t){t.d(a,{T:function(){return u},Y:function(){return r}});var l=t(94744),o=t.n(l),n=t(79605),i=t.n(n),s=t(29495),d=t(38895);let r=(e,a)=>{let t=i()(e=>(0,d.Ws)(e.outboundDate),o()(a,e.multicity));return t&&(0,d.Ws)(t.outboundDate)?t.outboundDate.from:void 0},u=(e,a)=>e.length!==a.length||e.some((e,t)=>!(0,s.fS)(e.origin,a[t].origin)||!(0,s.fS)(e.destination,a[t].destination))}}]);
//# sourceMappingURL=238.c86287ec.js.map